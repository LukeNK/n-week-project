<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luke's n-week-project</title>
    <link rel="shortcut icon" href="https://lukenk.github.io/print/letterhead.svg" type="image/x-icon">

    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <div>
            <img src="https://lukenk.github.io/print/letterhead.svg" alt="">
            <p class="med">
                LukeNK
            </p>
        </div>
        <p class="large">THE NOTE OF SCIENCE&nbsp;TOPICS</p>
        <object data="header.png" type="image/png">
            <img src="header.jpg">
        </object>
        <p>
            N-week project<br>
            Publication <time></time>
        </p>
    </header>
    <main class="loading">
        <h2 noNumber>About This Note</h2>
        <p>This Note is constructed into multiple parts, each based on the content of a big subject or field. In each part are topics that were sorted in ascending difficulty based on Luke's personal experience, not necessarily based on the actual comprehension difficulty.</p>

        <p>When reading about a topic, it is expected that you will start to search about the terminologies as well as the concepts that were mentioned that you did not understand. A good place to begin looking up is in this guide itself before going to the internet. Despite there being topics that are "harder" than other topics, it does not mean that learning the latter is the requirement for the "more difficult" topics.</p>

        <p>This Note was written in a way to provide intuition to difficult topics, giving a different perspective to digest a concept. On other topics, this Note acts as a cheat sheet for a quick review before tests. Whatever the case might be, I hope you find this Note somewhat helpful on the path that you choose. It is recommended that you follow through on a topic to the end, as most of the time topics are structured in a way that does not repeat the mentioned notices more than once.</p>

        <p>A lot of times, the topics are cross-disciplined and are useful in multiple fields, making sorting them into one particular part difficult. If that is the case, the topic will be put in a Part that is the most popular to be associated with that topic, then other cross-disciplined fields will be indicated in a bracket on the title of that topic. Therefore, if you did not find a topic you want to see in a part, maybe other parts will contain the concept you want to understand.</p>

        <p>An explanation of the reason why the parts were ordered the way it is: the author believed that math is the foundation of sciences, so it was put in the beginning. Biology will be followed after it because it is the science that is (mostly) visible to human application — it is the first machine being built based on the other science. At a lower level, chemistry will explain the interaction between substances that make up the organs and show how to build those living machines. Physics was put last but not least because physics itself describes the rules that others must follow. The order itself is less of something academic but more of the personal belief of the author.</p>

        <p>The Note of Science Topics by Luke NK is free and unlicensed. The author simply suggests the astute reader share this with anybody who needs a different perspective to look at the topics. Knowledge is best used when everybody knows it.</p>

        <nav>
            <h2 noNumber>Chapters</h2>
            <!--
                Call it chapters for now because there is no page number yet
                Also there is no link to the chapters yet
            -->
        </nav>

        <h1>Math</h1>
        <div subject="m"></div>
        <div subject="a"></div>

        <h1>Chemistry</h1>
        <div subject="c"></div>

        <h1>Physics</h1>
        <div subject="p"></div>

        <h1>Problems</h1>
        <p>Inspired by xkcd's What If, this part is here to show how very real math can solve real or unreal problems — it is here for your entertainment. The author understands that it will make the file a bit heavier with a mostly unused part, but it was here for a reason. Luke had a problem and because he was too lazy to create a different file, Luke decided to write the problem in this file with LaTeX. Then once again because Luke was too lazy, Luke decided that he would make it as a part and write a whole paragraph to justify instead of making a new file and deleting the notes. That is productivity at its peak.</p>

        <p>Read this for your enjoyment and get a break from the academic-filled parts above — enjoy a moment when practicality starts to spank the author.</p>
    </main>
</body>
<script>
window.MathJax = {
    // loader: {
    //     load: ['ui/lazy']
    // },
    tex: {
        // tags: 'ams',
        inlineMath: [['$', '$']],
    }
};

let subjects = document.querySelectorAll('div[subject]'),
    subjectLoaded = 0,
    checksum = {
        visuals: 0,
        equations: 0
    };

subjects.forEach(async (subject) => {
    let response = await fetch(`./${subject.getAttribute('subject')}/index.html`);
    response = await response.text();
    subject.innerHTML = response;

    // check images here so it can have subject
    subject.querySelectorAll('img').forEach(img => {
        let src = img.getAttribute('src');
        img.src = subject.getAttribute('subject') + '/' + src;
        src = src.split('.')[0];
        img.parentElement.id = `fig-${subject.getAttribute('subject')}${src}`;
    });

    subjectLoad();
})

function subjectLoad() {
    subjectLoaded++
    if (subjectLoaded < subjects.length) return;

    // check links here to cross-reference between subjects
    console.log('Checking links');
    document.querySelectorAll('a').forEach(a => {
        let ref = a.getAttribute('href');
        if (!ref.startsWith('#')) return;
        if (!document.getElementById(ref.slice(1))) {
            a.parentElement.classList.add('error');
            a.parentElement.title = 'This paragraph contains broken link';
            console.log(a)
            return;
        }
    });

    console.log('Assign numbering - figures');
    let chapter = 0, count = 0,
        allAs = document.querySelectorAll('a');
    document.querySelectorAll('figure:not([comic]), h2:not([noNumber])').forEach(e => {
        if (e.tagName === 'H2') { chapter++; count = 0; return; }
        count++; checksum.visuals++;
        let ref = `Figure ${chapter}.${count}`,
            caption = e.querySelector('figcaption');
        caption.innerHTML = `<b>${ref}</b>: ${caption.innerText}`;
        allAs.forEach(a => {
            if (a.getAttribute('href') === `#${e.id}`)
                a.innerText = ref;
        });
    });

    console.log('Assign numbering - tables');
    chapter = 0, count = 0;
    document.querySelectorAll('table, h2:not([noNumber])').forEach(e => {
        if (e.tagName === 'H2') { chapter++; count = 0; return; }
        count++; checksum.visuals++;
        let ref = `Table ${chapter}.${count}`,
            caption = e.querySelector('caption');
        caption.innerHTML = `<b>${ref}</b>: ${caption.innerText}`;
        allAs.forEach(a => {
            if (a.getAttribute('href') === `#${e.id}`)
                a.innerText = ref;
        });
    });

    console.log('Assign numbering - equations');
    chapter = 0, count = 0;
    document.querySelectorAll('eq, h2:not([noNumber])').forEach(e => {
        if (e.tagName === 'H2') { chapter++; count = 0; return; }
        count++; checksum.equations++;
        // Create equation number
        e.innerHTML = `
            \\begin{equation*}\\begin{aligned} ${e.innerHTML} \\end{aligned}\\end{equation*}
            <span>(${chapter}.${count})</span>`;

        let id = e.id;
        if (id === '') return;
        if (e.parentElement.tagName == 'P') {
            // move ID so user can see the introduction paragraph of the eq
            e.id = '';
            e.parentElement.id = id;
        }
        allAs.forEach(a => {
            if (a.getAttribute('href') === `#${id}`)
                a.innerText = `Equation ${chapter}.${count}`;
        });
    });

    console.log('Assign numbering - notes');
    chapter = 0, count = 0;
    document.querySelectorAll('note, h2:not([noNumber])').forEach(e => {
        if (e.tagName === 'H2') { chapter++; count = 0; return; }
        count++;
        let ref = `${chapter}.${count}`,
            content = e.innerHTML,
            pElement = e.parentElement,
            aside = document.createElement('aside');

        e.innerHTML = `[${ref}]`;

        aside.id = `note-${ref}`;
        aside.addEventListener('click', () => {
            window.location.hash = `#note-${ref}`;
        });
        aside.innerHTML = `<b>[${ref}]</b> ${content}`;

        pElement.insertAdjacentElement('beforebegin', aside);
    });

    console.log('Assign link reference - chapters and sections')
    document.querySelectorAll('h2:not([noNumber]), h3').forEach(e => {
        allAs.forEach(a => {
            if (a.getAttribute('href') === `#${e.id}`)
                a.innerText =
                    (e.tagName === 'H2' ? 'Chapter ' : 'Section ')
                    + ` "${e.innerText}"`;
        });
    });

    console.log('Generate table of contents');
    let toc = document.querySelector('nav');
    chapter = 0;
    document.querySelectorAll('h1, h2:not([noNumber])').forEach(e => {
        if (e.tagName === 'H1') {
            toc.innerHTML += `<span>${e.innerText}</span>`;
        } else {
            chapter++;
            toc.innerHTML +=
                `<p><a href="#${chapter}">
                    <b>${chapter}</b>.<nbp>
                    ${e.innerText}
                </a></p>`;
        }
    });

    var script = document.createElement('script');
    script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js';
    script.async = true;
    document.head.appendChild(script);
}

(async () => {
    // Handle version
    let sha = await fetch('https://api.github.com/repos/LukeNK/n-week-project/git/trees/main?recursive=1');
    sha = await sha.json();
    sha = sha.sha;

    let date = new Date();
    document.querySelector('time').setAttribute('datetime', date.toISOString());
    document.querySelector('time').innerHTML = sha.slice(0, 7).toUpperCase();
    checksum = document.querySelectorAll('h1, h2, h3, h4, h5, h6').length.toString(16).toUpperCase()
        + '.'
        + checksum.visuals.toString(16).toUpperCase() + '+'
        + checksum.equations.toString(16).toUpperCase();
    if (!window.location.href.includes('lukenk.github.io'))
        document.querySelector('time').innerHTML +=
            '<br>(downstream '+ checksum + ')';
    else console.log('Checksum:', checksum);
})();

window.onload = () => {
    // create a time out to scroll to the hash after the page is loaded
    setTimeout(() => {
        try {
            document.getElementById(window.location.hash.slice(1))
            .scrollIntoView()
        } catch (err) {
            console.info('No hash to scroll')
        }
        document.querySelector('main').classList.remove('loading');
    }, 100);
}
</script>
</html>